<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Explorador del Sistema Solar</title>

<style>

body{
margin:0;
overflow:hidden;
background:black;
font-family:Arial;
}

#panel{
position:absolute;
top:10px;
left:10px;
background:rgba(0,0,0,0.65);
color:white;
padding:12px;
border-radius:10px;
z-index:5;
}

button{
margin:2px;
cursor:pointer;
}

</style>
</head>

<body>

<div id="panel">

Explorador espacial<br>
Click activar c√°mara<br>
WASD mover<br>
Q/E subir bajar<br><br>

<button onclick="verSistema()">Sistema</button>

<button onclick="viajar(mercurio)">Mercurio</button>
<button onclick="viajar(venus)">Venus</button>
<button onclick="viajar(tierra)">Tierra</button>
<button onclick="viajar(marte)">Marte</button>
<button onclick="viajar(jupiter)">Jupiter</button>
<button onclick="viajar(saturno)">Saturno</button>
<button onclick="viajar(urano)">Urano</button>
<button onclick="viajar(neptuno)">Neptuno</button>
<button onclick="viajar(pluton)">Pluton</button>

<br><br>

<button onclick="aterrizar()">Aterrizar</button>
<button onclick="despegar()">Despegar</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/PointerLockControls.js"></script>

<script>

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
75,
window.innerWidth/window.innerHeight,
0.1,
100000
);

camera.position.set(0,300,900);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);

const loader = new THREE.TextureLoader();

const tex = {

sun:"https://i.postimg.cc/zGW5FLW0/sol.png",
mercury:"https://i.postimg.cc/jSqQzfBG/mercurio.png",
venus:"https://i.postimg.cc/Znh60vrX/venus.png",
earth:"https://i.postimg.cc/wTp1NdS6/image.png",
mars:"https://i.postimg.cc/x8S1LKp4/marte-textura.png",
jupiter:"https://i.postimg.cc/W3mvLxSq/jupiter_textura.png",
saturn:"https://i.postimg.cc/T1Wn3qLQ/saturno.png",
uranus:"https://i.postimg.cc/dVFNgDp8/urano.png",
neptune:"https://i.postimg.cc/HxFBzLb0/neptuno.png",
pluto:"https://i.postimg.cc/fL9JX9s3/pluton.png",

moon:"https://i.postimg.cc/7hfrGbwg/luna.png",
rings:"https://i.postimg.cc/yYhKz6LX/saturn-rings.png"

};

const light = new THREE.PointLight(0xffffff,3);
scene.add(light);

const sun = new THREE.Mesh(
new THREE.SphereGeometry(60,64,64),
new THREE.MeshBasicMaterial({map:loader.load(tex.sun)})
);

scene.add(sun);

function crearPlaneta(texture,size,dist,orb,rot){

const mesh = new THREE.Mesh(
new THREE.SphereGeometry(size,32,32),
new THREE.MeshStandardMaterial({map:loader.load(texture)})
);

mesh.userData={
dist:dist,
angle:Math.random()*Math.PI*2,
orb:orb,
rot:rot
};

scene.add(mesh);

return mesh;

}

const mercurio=crearPlaneta(tex.mercury,4,140,0.00008,0.002);
const venus=crearPlaneta(tex.venus,6,200,0.00007,0.002);
const tierra=crearPlaneta(tex.earth,8,270,0.00006,0.004);
const marte=crearPlaneta(tex.mars,5,340,0.00005,0.003);
const jupiter=crearPlaneta(tex.jupiter,20,460,0.00003,0.006);
const saturno=crearPlaneta(tex.saturn,18,560,0.000025,0.005);
const urano=crearPlaneta(tex.uranus,14,660,0.00002,0.004);
const neptuno=crearPlaneta(tex.neptune,14,760,0.000018,0.004);
const pluton=crearPlaneta(tex.pluto,3,900,0.000012,0.002);

function crearAnillos(){

const geo = new THREE.RingGeometry(26,40,128);

const mat = new THREE.MeshStandardMaterial({
map:loader.load(tex.rings),
side:THREE.DoubleSide,
transparent:true
});

const ring = new THREE.Mesh(geo,mat);

ring.rotation.x=Math.PI/2;

saturno.add(ring);

}

crearAnillos();

function crearLuna(planeta,dist,vel,size){

const moon = new THREE.Mesh(
new THREE.SphereGeometry(size,16,16),
new THREE.MeshStandardMaterial({map:loader.load(tex.moon)})
);

moon.userData={
planet:planeta,
dist:dist,
vel:vel,
angle:Math.random()*Math.PI*2
};

scene.add(moon);

return moon;

}

const moons=[

crearLuna(tierra,14,0.01,2),

crearLuna(marte,10,0.02,1),
crearLuna(marte,16,0.01,1),

crearLuna(jupiter,30,0.01,3),
crearLuna(jupiter,40,0.008,2),

crearLuna(saturno,35,0.008,2),

crearLuna(neptuno,24,0.004,1.5)

];

const controls = new THREE.PointerLockControls(camera,document.body);
document.body.addEventListener("click",()=>controls.lock());

const move={f:false,b:false,l:false,r:false,u:false,d:false};

document.addEventListener("keydown",e=>{
if(e.code==="KeyW")move.f=true;
if(e.code==="KeyS")move.b=true;
if(e.code==="KeyA")move.l=true;
if(e.code==="KeyD")move.r=true;
if(e.code==="KeyE")move.u=true;
if(e.code==="KeyQ")move.d=true;
});

document.addEventListener("keyup",e=>{
if(e.code==="KeyW")move.f=false;
if(e.code==="KeyS")move.b=false;
if(e.code==="KeyA")move.l=false;
if(e.code==="KeyD")move.r=false;
if(e.code==="KeyE")move.u=false;
if(e.code==="KeyQ")move.d=false;
});

let planetaActual=null;
let aterrizado=false;

function viajar(p){

planetaActual=p;

camera.position.set(
p.position.x+40,
p.position.y+20,
p.position.z+40
);

}

function verSistema(){

camera.position.set(0,300,900);

}

function aterrizar(){

if(!planetaActual) return;

camera.position.set(
planetaActual.position.x,
planetaActual.position.y+2,
planetaActual.position.z
);

aterrizado=true;

}

function despegar(){

if(!planetaActual) return;

camera.position.set(
planetaActual.position.x+50,
planetaActual.position.y+30,
planetaActual.position.z+50
);

aterrizado=false;

}

function animate(){

requestAnimationFrame(animate);

const speed = aterrizado ? 2 : 6;

if(move.f)controls.moveForward(speed);
if(move.b)controls.moveForward(-speed);
if(move.l)controls.moveRight(-speed);
if(move.r)controls.moveRight(speed);
if(move.u)camera.position.y+=speed;
if(move.d)camera.position.y-=speed;

[
mercurio,venus,tierra,marte,
jupiter,saturno,urano,neptuno,pluton
].forEach(p=>{

p.userData.angle+=p.userData.orb;

p.position.x=Math.cos(p.userData.angle)*p.userData.dist;
p.position.z=Math.sin(p.userData.angle)*p.userData.dist;

p.rotation.y+=p.userData.rot;

});

moons.forEach(m=>{

m.userData.angle+=m.userData.vel;

const p=m.userData.planet.position;

m.position.x=p.x+Math.cos(m.userData.angle)*m.userData.dist;
m.position.z=p.z+Math.sin(m.userData.angle)*m.userData.dist;
m.position.y=p.y;

});

renderer.render(scene,camera);

}

animate();

window.addEventListener("resize",()=>{

camera.aspect=window.innerWidth/window.innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(window.innerWidth,window.innerHeight);

});

</script>

</body>
</html>
